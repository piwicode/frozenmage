<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_mage</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_entity</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_move_init()
// Horizontal speed when walking.
walk_speed = 4;
// Vertical speed set when jumping.
jump_speed = 10;

aim_arrow = instance_create(x, y, obj_aim_arrow)
aim_arrow.visible = false
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Get user inputs

jump_ctrl = keyboard_check_pressed(vk_space);
fire_pressed = keyboard_check(vk_control);
fire_released = keyboard_check_released(vk_control);

scr_accelerate();
xs = x_ctrl * walk_speed;

// If jump key has just been pressed and there is something solid just below
// the object, then jump.
if jump_ctrl &amp;&amp; place_meeting(x, y + 1, obj_solid) {
  ys = -jump_speed;
}
// Fly
if(keyboard_check(vk_shift)) {
 ys -= 1;
}

// Detect collisions with walls
scr_move();

// Horizontal flip the sprite according to the command.
if (x_ctrl != 0) {
  image_xscale = x_ctrl;
}

// -y_ctrl because vertical axis is inverted between atan and the screen.
// use image_scale to remember the current facing position. 
if (x_ctrl == 0 &amp;&amp; y_ctrl == 0) {
  var aim_direction = radtodeg(arctan2(-y_ctrl, image_xscale));
} else {
  var aim_direction = radtodeg(arctan2(-y_ctrl, x_ctrl));
}
aim_arrow.visible = fire_pressed;
aim_arrow.x = x 
aim_arrow.y = y
aim_arrow.image_angle = aim_direction;


if (fire_released) {
  spark = instance_create(x, y, obj_spark);
  with (spark) {
    direction = aim_direction;
    speed = max_speed;
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x_ctrl = keyboard_check(vk_right) - keyboard_check(vk_left);
y_ctrl = keyboard_check(vk_down) - keyboard_check(vk_up);

xs = x_ctrl * walk_speed;

if xs != 0 &amp;&amp; place_meeting(x + sign(xs), y, obj_icecube) { 
  var block = instance_place(x + sign(xs), y, obj_icecube);
  block.xs = xs;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_icecube">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Is icecube falling on the mage
if (other.ys &gt; 0) {
  instance_destroy();
  instance_create(x, y, obj_explode);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_orc">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Enemy collision
instance_destroy();
instance_create(x, y, obj_explode);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
